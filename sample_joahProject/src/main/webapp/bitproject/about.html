<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'>
<title>Free CSS Templates | by CssTemplatesMarket.com</title>
<link rel="stylesheet" href="../lib/bootstrap/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="../lib/mycss/style_search.css" />
<link rel="stylesheet" type="text/css" href="../lib/mycss/style_header.css" />
<script type="text/javascript" src="../lib/myjs/jquery-ui.min.js"></script>
<script type="text/javascript" src="../lib/myjs/jquery-1.3.2.min.js"></script>

<script type="text/javascript" src="../lib/myjs/modernizr.js"></script>

<script src="js/notifIt.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<link href="css/notifIt.css" type="text/css" rel="stylesheet">

<link rel="stylesheet" type="text/css" href="../lib/mycss/styles.css"></link>

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/font-awesome.min.css" rel="stylesheet">
<link href="css/lightbox.css" rel="stylesheet">
<link href="css/animate.min.css" rel="stylesheet">
<link href="css/main.css" rel="stylesheet">
<link href="css/responsive.css" rel="stylesheet">
    <script type="text/javascript"
      src="http://openapi.map.naver.com/openapi/v2/maps.js?clientId=ql7iZyYF1MnnPLwV_69L"></script>
</head>


<!-- 맵 인포 윈도우 시작. -->
<style>
.wrap {position: absolute;left: 0;bottom: 40px;width: 288px;height: 132px;margin-left: -144px;text-align: left;overflow: hidden;font-size: 12px;font-family: 'Malgun Gothic', dotum, '돋움', sans-serif;line-height: 1.5;}
    .wrap * {padding: 0;margin: 0;}
    .wrap .info {width: 286px;height: 120px;border-radius: 5px;border-bottom: 2px solid #ccc;border-right: 1px solid #ccc;overflow: hidden;background: #fff;}
    .wrap .info:nth-child(1) {border: 0;box-shadow: 0px 1px 2px #888;}
    .info .title {padding: 5px 0 0 10px;height: 30px;background: #eee;border-bottom: 1px solid #ddd;font-size: 18px;font-weight: bold;}
    .info .close {position: absolute;top: 10px;right: 10px;color: #888;width: 17px;height: 17px;background: url('http://i1.daumcdn.net/localimg/localimages/07/mapapidoc/overlay_close.png');}
    .info .close:hover {cursor: pointer;}
    .info .body {position: relative;overflow: hidden;}
    .info .desc {position: relative;margin: 13px 0 0 90px;height: 75px;}
    .desc .ellipsis {overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}
    .desc .jibun {font-size: 11px;color: #888;margin-top: -2px;}
    .info .img {position: absolute;top: 6px;left: 5px;width: 73px;height: 71px;border: 1px solid #ddd;color: #888;overflow: hidden;}
</style>

<!-- 맵 인포 윈도우 끝-->
<body>
   <div id="main_container">

       <!--//////////////////////////////////////////////////////////////////////////////////// -->
       <!--                                     Header                                          -->
       <!--//////////////////////////////////////////////////////////////////////////////////// -->

             <!-- header -->
<header id="h_title"></header>

<script type="text/javascript" src="../lib/jquery/jquery.js"></script>
<script>
$.ajax({
    url : "header.html",
    dataType : "html",
    type : "get",  // post 또는 get
    success : function(result){
        $("#h_title").html(result);
    }
});
</script>
       <!--//////////////////////////////////////////////////////////////////////////////////// -->
       <!--                                    end Header                                       -->
       <!--//////////////////////////////////////////////////////////////////////////////////// -->


        <!--//////////////////////////////////////////////////////////////////////////////////// -->
       <!--                                    menu                                             -->
       <!--//////////////////////////////////////////////////////////////////////////////////// -->

        <!--//////////////////////////////////////////////////////////////////////////////////// -->
      <!--         center_content_pages = pages_banner + left_content + right_content          -->
      <!--//////////////////////////////////////////////////////////////////////////////////// -->

      <div class="center_content_pages">
         <div class="pages_banner">Contact Date Course. delecious food,
            watching, health, etc...</div>

            <!--//////////////////////////////////////////////////////////////////////////////////// -->
         <!--                           left contnt = Search Option                               -->
         <!--//////////////////////////////////////////////////////////////////////////////////// -->
      
       <div class="left_content">
	       <div class="loc_list1">
	         <label for="st_loc"> 출발</label>
	         <input id="st_loc" type="text"> <button id="st_loc_btn" class="btn btn-xs" type="button"><i class="fa fa-map-marker" style="font-size:16px"></i></button> <br/>
	         <label for="ed_loc"> 도착</label>
	         <input id="ed_loc" type="text"> <button id="ed_loc_btn" class="btn btn-xs" type="button"><i class="fa fa-search"></i></button> <br/>
           </div>
           <div class="loc_list2">
		         <label style="margin: 5px 0 5px 18px; font-size: 30px; ">List</label>
		        <div class="sidebar blog-sidebar">
					<div class="categories">
						<ul class="list_example inbox" id="searchList">
							<!-- 여기에 검색 리스트 띄움. ul li 로 ///////////////////////////////////////////////////// -->
						</ul>
						<div>
							<button type="button" class="btn btn-primary btn-xs prev_btn">Prev</button>
							<p>
								<span>1</span>/<span></span>
							</p>
							<button type="button" class="btn btn-primary btn-xs next_btn">Next</button>
						</div>
					</div>
					<!-- <input type="button" class="form_search" value="Search" /> -->
				</div>
			</div>
      </div>

            <!--//////////////////////////////////////////////////////////////////////////////////// -->
         <!--                       end left contnt = Search Optopn                               -->
         <!--//////////////////////////////////////////////////////////////////////////////////// -->

         <!--//////////////////////////////////////////////////////////////////////////////////// -->
         <!-- right contnt = menubar(img, food, watching button + search bar) + img + save button -->
         <!--//////////////////////////////////////////////////////////////////////////////////// -->

         <div class="right_content">
             <div class="menu_bar">
               <img src="18415.png"
                  class="map_pic" height="30" width="30" /> 
                  <input type="button" class="form_mapSear" id="I-001" value=" food " /> 
                  <input type="button" class="form_mapSear" id="I-002" value=" entertain " /> 
                  <input type="button" class="form_mapSear" id="I-003" value=" experience " /> 
                  <input type="button" class="form_mapSear" id="I-004" value=" exercise " />
                  <input type="button" class="form_mapSear" id="I-005" value=" show " />
                  <input type="button" class="form_mapSear checked" id="I-006" value=" all " />
            </div>
            <div id="testMap" style="width: 800px; height: 400px; margin: 0;"></div>
            <div>
              <button class="form_submit" id="save_Btn" onclick="not2()">SAVE</button>
            </div>
         </div>

            <!--//////////////////////////////////////////////////////////////////////////////////// -->
         <!--                          end right content                                          -->
         <!--//////////////////////////////////////////////////////////////////////////////////// -->
         
       <div class="clear">
       </div>
         <div class="select_div row">
          <div class="col-sm-3" id="choice_div1">
           <img src="circle.png" class="img-circle">
          </div>
          <div class="col-sm-3" id="choice_div2">
           <img src="circle.png" class="img-circle">
          </div>
          <div class="col-sm-3" id="choice_div3">
            <img src="circle.png" class="img-circle">
          </div>
          <div class="col-sm-3" id="choice_div4">
            <img src="circle.png" class="img-circle">
          </div>
         </div>
         
         <div class="select_div_span row">
          <div class="col-sm-3" id="choice_name1">
          <span style="font-size:8px;"> </span>
          </div>
          <div class="col-sm-3" id="choice_name2">
          <span style="font-size:8px;"> </span>
          </div>
          <div class="col-sm-3" id="choice_name3">
          <span style="font-size:8px;"> </span>
          </div>
          <div class="col-sm-3" id="choice_name4">
          <span style="font-size:8px;"> </span>
          </div>
         </div>
      </div>

        <!--//////////////////////////////////////////////////////////////////////////////////// -->
      <!--                            end center_content_pages =                               -->
      <!--//////////////////////////////////////////////////////////////////////////////////// -->




   </div>
    <script>
$.ajax({
    url : "footer.html",
    dataType : "html",
    type : "get",  // post 또는 get
    success : function(result){
        $("#footer_id").html(result);
     }
});
</script>
<footer id="footer_id">
</footer>
         <!--//////////////////////////////////////////////////////////////////////////////////// -->
         <!--  -->
         <!--//////////////////////////////////////////////////////////////////////////////////// -->


<script type="text/javascript" src="../lib/jquery/jquery.min.js"></script>
 <script type="text/javascript">
 var oPoint = new nhn.api.map.LatLng(37.5010226, 127.0396037);                       
 var oCenterPoint = new nhn.api.map.LatLng(37.5010226, 127.0396037);
 nhn.api.map.setDefaultPoint('LatLng');
 oMap = new nhn.api.map.Map('testMap', {
   point : oPoint, // 여기에다 현재 위치를 추가하면 됨.
   zoom : 10,
   enableWheelZoom : true,
   enableDragPan : true,
   enableDblClickZoom : true,
   mapMode : 0, // 맵 모드 0:기본 1:위성 2:기본+위성
   activateTrafficMap : false,
   activateBicycleMap : false,
   minMaxLevel : [ 1, 14 ],
   size : new nhn.api.map.Size(800, 400)
 //지도 크기.
 });

 var mapZoom = new nhn.api.map.ZoomControl(); // - 줌 컨트롤 선언
 oMap.addControl(mapZoom); // - 줌 컨트롤 추가.
 mapZoom.setPosition({
   left : 760,
   bottom : 25
 }); // - 줌 컨트롤 위치 지정.

 //아이콘설정
 var oSize = new nhn.api.map.Size(23, 23);
 var oOffset = new nhn.api.map.Size(14, 37);
 var oIcon;
 
 var foodIcon = new nhn.api.map.Icon('icon/marker_food.png', oSize, oOffset); // 지도에 표시될 아이콘
 var entIcon = new nhn.api.map.Icon('icon/marker_ent.png', oSize, oOffset); // 지도에 표시될 아이콘
 var expIcon = new nhn.api.map.Icon('icon/marker_exp.png', oSize, oOffset); // 지도에 표시될 아이콘
 var exerciseIcon = new nhn.api.map.Icon('icon/marker_exercise.png', oSize, oOffset); // 지도에 표시될 아이콘
 var showIcon = new nhn.api.map.Icon('icon/marker_show.png', oSize, oOffset); // 지도에 표시될 아이콘
 
 var checkSize = new nhn.api.map.Size(25, 26);
 var checkedIcon = new nhn.api.map.Icon('2.png', checkSize, oOffset); // 지도에 체크된 아이콘
 

 var oLabel = new nhn.api.map.MarkerLabel(); // - 마커 라벨 선언.
 oMap.addOverlay(oLabel); // - 마커 라벨 지도에 추가. 기본은 라벨이 보이지 않는 상태로 추가됨.



 /* 마커 추가하기 + 해당하는 Infowindow 만들기 n 반복*/
 var oMarkers = [];
 var openMarkers = [];
 var mapInfoTestWindow = [];
 var searchNo;
 var objNo;
 var searchList = $("#searchList");

 //맨 처음 시작할 때 항상 전체 리스트 보이도록 하도록 하기.                          
 $.getJSON('ajax/allLocation.do', function(resultObj) {
   var i = 0;
   
   for(var location of resultObj.data) {
     /* $("<li class='searchlists message' id='li"+location.lno+"'>")
     .html("<span class='from' style='white-space:nowrap;'>"+ location.name +
         "</span><br><span style='font-size:11px;white-space:nowrap;'>"+ location.content +"</span></li>")
         .appendTo(searchList); //리스트 띄우는 것. */
     if (location.interestCode == "I-001") { oIcon = foodIcon; }
     else if (location.interestCode == "I-002") { oIcon = entIcon; }
     else if (location.interestCode == "I-003") { oIcon = expIcon; }
     else if (location.interestCode == "I-004") { oIcon = exerciseIcon; }
     else if (location.interestCode == "I-005") { oIcon = showIcon; }
     
         oMarkers[location.lno] = new nhn.api.map.Marker(oIcon, {
       title : location.name,
       smallSrc: location.lno
     });
     oMarkers[location.lno].setPoint(new nhn.api.map.LatLng(location.lng, location.lat))
     oMap.addOverlay(oMarkers[location.lno]);
     
     if(!location.photo.length) { // 0일때
    	 if (location.interestCode == "I-001") { location.photo = "icon/marker_food.png"; }
       else if (location.interestCode == "I-002") { location.photo = "icon/marker_ent.png"; }
       else if (location.interestCode == "I-003") { location.photo = "icon/marker_exp.png"; }
       else if (location.interestCode == "I-004") { location.photo = "icon/marker_exercise.png"; }
       else if (location.interestCode == "I-005") { location.photo = "icon/marker_show.png"; }
     }
     
     mapInfoTestWindow[location.lno] = new nhn.api.map.InfoWindow({
       point: oMarkers[location.lno].getPoint(),
       content: '<div class="wrap">' +
       '    <div class="info">' +
       '        <div class="title">'+ location.name  +
       '            <div class="close" onclick="closeOverlay()" title="닫기"></div>' +
       '        </div>' +
       '        <div class="body">' +
       '            <div class="img">' +
       '                <img src="'+ location.photo +'" width="73" height="70">' +
       '           </div>' +
       '            <div class="desc">' +
       '                <div class="ellipsis">'+ location.content + '</div>' +
       '                <div class="jibun ellipsis"></div>' +
       '                <div class="choice_1" id="choice_id'+location.lno+'" style="position:relative; top:25px; left:150px">' +
       '                <button type="button" class="btn btn-default btn-xs">선택</button></div>' + // 선택 분류할 때 div를 다르게 하기.
       '    </div>' +
       '</div>'
     });
     mapInfoTestWindow[location.lno].setVisible(false);
     oMap.addOverlay(mapInfoTestWindow[location.lno]);

     mapInfoTestWindow[location.lno].attach('changeVisible', function(oCustomEvent) {
       if (oCustomEvent.visible) {
         oLabel.setVisible(false);
       }
     });
     oMarkers[location.lno].setVisible(false);

     openMarkers[i] = location.lno;
     i++; // 닫기 위해 기존 있던 마커넘버를 저장하는 것.
   } // for문 끝 
   
   ////리스트를 위한 jQuery
   $(".list_example + div > p > span:last-child").text(Math.ceil($(".list_example").children("li").size()/5));
   $(".list_example > li").slice(0,5).addClass("on");
   $(".list_example > li:nth-of-type(5n)").addClass("5n");
   $(".list_example + div > button").click(function() {
       var nav_list = $(this).parent("div").prev(".list_example");
       if($(this).is(":last-child")) {
           if(!$(nav_list).children("li:last").hasClass("on")) {
               $(nav_list).children("li.on:last").nextUntil(".5n").addClass("on").next(".5n").addClass("on");
               setTimeout(function() {
                   $(nav_list).children("li.on:first").removeClass("on").nextUntil(".5n").removeClass("on").next(".5n").removeClass("on");
               });
               var paging = ($(nav_list).children("li.on:last").index()+1)/5;
               $(this).siblings("p").children("span:first-child").text(Math.ceil(paging));
           }
       }
       else {
           if(!$(nav_list).children("li:first").hasClass("on")) {
               $(nav_list).children("li.on:first").prev(".5n").addClass("on").prevUntil(".5n").addClass("on");
               setTimeout(function() {
                   $(nav_list).children("li.on:last").removeClass("on").prevUntil(".5n").removeClass("on");
               });
               var paging = ($(nav_list).children("li.on:first").index()+1)/5;
               $(this).siblings("p").children("span:first-child").text(Math.ceil(paging));
           }
       }
   }); // 리스트를 위한 jQuery

   /* 리스트에 hover 일 때 해당하는 마커 딱 바뀌기 */
   $("li.on").hover(function() {
     console.log($(this));
   });
   $("li.on").click(function() {
       console.log($(this));
     });

 }); // AJAX 호출 끝


 /* 메뉴 클릭 했을 때에 띄워진 마커를 숨기고 보이는 것의 기능만 하도록 하기. */
 $(".form_mapSear").click(function(event) {
	 var mapLat = oMap.getCenter().getLat();
	 var mapLng = oMap.getCenter().getLng();
   console.log("메뉴 이벤트 시작!");
   searchNo = $(this).attr("id");
   $(".checked").removeClass("checked");
   $(this).addClass("checked");
   for(var c = 0; c < openMarkers.length; c++){
     oMarkers[openMarkers[c]].setVisible(false);
     /* oMap.removeOverlay(oMarkers[openMarkers[c]]); // 열려있는 마커를 닫는다. */
   }
   console.log(searchNo);
   $.getJSON('ajax/location.do?intCode=' + searchNo + '&lat=' + mapLat +'&lng=' + mapLng, function(resultObj) {
     var i = 0;
     for(var location of resultObj.data) {
    	 $("<li class='searchlists message' id='li"+location.lno+"'>")
         .html("<span class='from' style='white-space:nowrap;'>"+ location.name +
             "</span><br><span style='font-size:11px;white-space:nowrap;'>"+ location.content +"</span></li>")
             .appendTo(searchList); //리스트 띄우는 것.

       oMarkers[location.lno].setVisible(true);

       openMarkers[i] = location.lno;
       i++; // 닫기 위해 기존 있던 마커넘버를 저장하는 것.
     } // for문 끝 
     console.log("메뉴 이벤트 반복문 끝!");
     
     // 리스트를 위한 jQuery
     $(".list_example + div > p > span:last-child").text(Math.ceil($(".list_example").children("li").size()/5));
     $(".list_example > li").slice(0,5).addClass("on");
     $(".list_example > li:nth-of-type(5n)").addClass("5n");
     /* $(".list_example + div > button").click(function() {
         var nav_list = $(this).parent("div").prev(".list_example");
         if($(this).is(":last-child")) {
             if(!$(nav_list).children("li:last").hasClass("on")) {
                 $(nav_list).children("li.on:last").nextUntil(".5n").addClass("on").next(".5n").addClass("on");
                 setTimeout(function() {
                     $(nav_list).children("li.on:first").removeClass("on").nextUntil(".5n").removeClass("on").next(".5n").removeClass("on");
                 });
                 var paging = ($(nav_list).children("li.on:last").index()+1)/5;
                 $(this).siblings("p").children("span:first-child").text(Math.ceil(paging));
             }
         }
         else {
             if(!$(nav_list).children("li:first").hasClass("on")) {
                 $(nav_list).children("li.on:first").prev(".5n").addClass("on").prevUntil(".5n").addClass("on");
                 setTimeout(function() {
                     $(nav_list).children("li.on:last").removeClass("on").prevUntil(".5n").removeClass("on");
                 });
                 var paging = ($(nav_list).children("li.on:first").index()+1)/5;
                 $(this).siblings("p").children("span:first-child").text(Math.ceil(paging));
             }
         }
     }); // 리스트를 위한 jQuery */
     /* 리스트에 hover 일 때 해당하는 마커 딱 바뀌기 */
     $("li.searchlists").hover(function() {
    	 oIcon = oMarkers[$(this).attr("id").substring(2)].getIcon();
    	 oMarkers[$(this).attr("id").substring(2)].setIcon(checkedIcon); 
     }, function() {
    	 oMarkers[$(this).attr("id").substring(2)].setIcon(oIcon); 
     });
     
     $("li.searchlists").click(function() {
    	 /* 정보창 띄우기 */
    	 if (targetWindow == 0) {
				 mapInfoTestWindow[oMarkers[$(this).attr("id").substring(2)]._smallSrc].setVisible(true);
				 oMap.setCenter(oMarkers[$(this).attr("id").substring(2)].getPoint());
				 targetWindow = oMarkers[$(this).attr("id").substring(2)]._smallSrc;
				 targetNo = oMarkers[$(this).attr("id").substring(2)]._smallSrc; // 정보창의 넘버
    	 } else if (targetWindow != 0) {
 	       mapInfoTestWindow[targetWindow].setVisible(false);
 	       mapInfoTestWindow[$(this).attr("id").substring(2)].setVisible(true);
 	       oMap.setCenter(oMarkers[$(this).attr("id").substring(2)].getPoint());
 	       targetWindow = oMarkers[$(this).attr("id").substring(2)]._smallSrc;
 	       targetNo = oMarkers[$(this).attr("id").substring(2)]._smallSrc; // 정보창의 넘버
    	 }
    	 
    	 $("#choice_id"+ targetNo).click(function(event) {
    	     if(targetNo != filterOne) {
    	       event.preventDefault();
    	       if ((c_count%4) == 1) {
    	         /* $("#choice_div1").text(targetNo); */
    	         $.getJSON('ajax/locationDetail.do?no=' + targetNo, function(resultObj) {
    	           var ajaxResult = resultObj.ajaxResult;
    	           if (ajaxResult.status == "success") {
    	             var location = ajaxResult.data;
    	             if(!location.photo.length) { // 0일때
    	                 if (location.interestCode == "I-001") { location.photo = "icon/marker_food.png"; }
    	                 else if (location.interestCode == "I-002") { location.photo = "icon/marker_ent.png"; }
    	                 else if (location.interestCode == "I-003") { location.photo = "icon/marker_exp.png"; }
    	                 else if (location.interestCode == "I-004") { location.photo = "icon/marker_exercise.png"; }
    	                 else if (location.interestCode == "I-005") { location.photo = "icon/marker_show.png"; }
    	             }
    	             $("#choice_div1").html("<img src='"+ location.photo +"' id='img_icon' class='img-circle' height='80px' width='80px'>" +
    	                 "<input type='hidden' name='lno1' value='"+ targetNo +"'>");
    	             $("#choice_name1").html("<span class='span_label'>"+ location.name +"</span>");
    	           }
    	         });
    	         c_count++;
    	       } else if ((c_count%4) == 2) {
    	         $.getJSON('ajax/locationDetail.do?no=' + targetNo, function(resultObj) {
    	           var ajaxResult = resultObj.ajaxResult;
    	           if (ajaxResult.status == "success") {
    	             var location = ajaxResult.data;
    	             if(!location.photo.length) { // 0일때
    	                 if (location.interestCode == "I-001") { location.photo = "icon/marker_food.png"; }
    	                 else if (location.interestCode == "I-002") { location.photo = "icon/marker_ent.png"; }
    	                 else if (location.interestCode == "I-003") { location.photo = "icon/marker_exp.png"; }
    	                 else if (location.interestCode == "I-004") { location.photo = "icon/marker_exercise.png"; }
    	                 else if (location.interestCode == "I-005") { location.photo = "icon/marker_show.png"; }
    	             }
    	             $("#choice_div2").html("<img src='"+ location.photo +"' class='img-circle' height='80px' width='80px'>" +
    	                 "<input type='hidden' name='lno2' value='"+ targetNo +"'>");
    	             $("#choice_name2").html("<span class='span_label'>"+ location.name +"</span>");
    	           }
    	         });
    	         c_count++;
    	       } else if ((c_count%4) == 3) {
    	         $.getJSON('ajax/locationDetail.do?no=' + targetNo, function(resultObj) {
    	           var ajaxResult = resultObj.ajaxResult;
    	           if (ajaxResult.status == "success") {
    	             var location = ajaxResult.data;
    	             if(!location.photo.length) { // 0일때
    	                 if (location.interestCode == "I-001") { location.photo = "icon/marker_food.png"; }
    	                 else if (location.interestCode == "I-002") { location.photo = "icon/marker_ent.png"; }
    	                 else if (location.interestCode == "I-003") { location.photo = "icon/marker_exp.png"; }
    	                 else if (location.interestCode == "I-004") { location.photo = "icon/marker_exercise.png"; }
    	                 else if (location.interestCode == "I-005") { location.photo = "icon/marker_show.png"; }
    	             }
    	             $("#choice_div3").html("<img src='"+ location.photo +"' class='img-circle' height='80px' width='80px'>" +
    	                 "<input type='hidden' name='lno3' value='"+ targetNo +"'>");
    	             $("#choice_name3").html("<span class='span_label'>"+ location.name +"</span>");
    	           }
    	         });
    	         c_count++;
    	       } else if ((c_count%4) == 0) {
    	         $.getJSON('ajax/locationDetail.do?no=' + targetNo, function(resultObj) {
    	           var ajaxResult = resultObj.ajaxResult;
    	           if (ajaxResult.status == "success") {
    	             var location = ajaxResult.data;
    	             if(!location.photo.length) { // 0일때
    	                 if (location.interestCode == "I-001") { location.photo = "icon/marker_food.png"; }
    	                 else if (location.interestCode == "I-002") { location.photo = "icon/marker_ent.png"; }
    	                 else if (location.interestCode == "I-003") { location.photo = "icon/marker_exp.png"; }
    	                 else if (location.interestCode == "I-004") { location.photo = "icon/marker_exercise.png"; }
    	                 else if (location.interestCode == "I-005") { location.photo = "icon/marker_show.png"; }
    	             }
    	             $("#choice_div4").html("<img src='"+ location.photo +"' class='img-circle' height='80px' width='80px'>" +
    	                 "<input type='hidden' name='lno4' value='"+ targetNo +"'>");
    	             $("#choice_name4").html("<span class='span_label'>"+ location.name +"</span>");
    	           }
    	         });
    	         c_count++;
    	       }
    	     }
    	     filterOne = targetNo;
    	   });
     });
   }); // AJAX 호출 끝
   $(".searchlists").remove();
 });


 /* 마커 클릭시 정보창 띄우는 것 */
 var c_count = 1; // 다른 선택창에 정보 기록하려고
 var filterOne = 0;
 var targetNo;  // 열고싶은 창 번호.
 var targetWindow = 0; // 열었던 창 번호.
 oMap.attach('click', function(oCustomEvent) {

   var oTarget = oCustomEvent.target;
   if (oTarget instanceof nhn.api.map.Marker) {
     if (oCustomEvent.clickCoveredMarker) {
       return; //중복마커일때 처리하는 부분
     }  
     console.log("처리전 타겟넘버:" + targetNo);
     targetNo = oTarget._smallSrc;
     console.log("처리후 타겟넘버:" + targetNo);
     if (targetWindow == 0) {
       mapInfoTestWindow[targetNo].setVisible(true);
       mapInfoTestWindow[targetNo].setPosition({right : 15, top : 30});
       mapInfoTestWindow[targetNo].autoPosition();
       targetWindow = targetNo;

     } else if (targetWindow != 0) {
       mapInfoTestWindow[targetWindow].setVisible(false);
       mapInfoTestWindow[targetNo].setVisible(true);
       mapInfoTestWindow[targetNo].setPosition({right : 15, top : 30});
       mapInfoTestWindow[targetNo].autoPosition();
       targetWindow = targetNo;
     }
   } 
   if (!(oTarget instanceof nhn.api.map.Marker)) {
     mapInfoTestWindow[targetWindow].setVisible(false);
   } // 마커가 아니면 클릭시 닫힌다. 

   // 각 해당하는 정보창의 버튼 눌렀을 때 선택되는 이벤트.
   $("#choice_id"+ targetNo).click(function(event) {
	   console.log("클릭시 타겟넘버:" + targetNo);
     if(targetNo != filterOne) {
       event.preventDefault();
       if ((c_count%4) == 1) {
         /* $("#choice_div1").text(targetNo); */
         $.getJSON('ajax/locationDetail.do?no=' + targetNo, function(resultObj) {
           var ajaxResult = resultObj.ajaxResult;
           if (ajaxResult.status == "success") {
             var location = ajaxResult.data;
             if(!location.photo.length) { // 0일때
                 if (location.interestCode == "I-001") { location.photo = "icon/marker_food.png"; }
                 else if (location.interestCode == "I-002") { location.photo = "icon/marker_ent.png"; }
                 else if (location.interestCode == "I-003") { location.photo = "icon/marker_exp.png"; }
                 else if (location.interestCode == "I-004") { location.photo = "icon/marker_exercise.png"; }
                 else if (location.interestCode == "I-005") { location.photo = "icon/marker_show.png"; }
             }
             $("#choice_div1").html("<img src='"+ location.photo +"' id='img_icon' class='img-circle' height='80px' width='80px'>" +
                 "<input type='hidden' name='lno1' value='"+ targetNo +"'>");
             $("#choice_name1").html("<span class='span_label'>"+ location.name +"</span>");
           }
         });
         c_count++;
       } else if ((c_count%4) == 2) {
         $.getJSON('ajax/locationDetail.do?no=' + targetNo, function(resultObj) {
           var ajaxResult = resultObj.ajaxResult;
           if (ajaxResult.status == "success") {
             var location = ajaxResult.data;
             if(!location.photo.length) { // 0일때
                 if (location.interestCode == "I-001") { location.photo = "icon/marker_food.png"; }
                 else if (location.interestCode == "I-002") { location.photo = "icon/marker_ent.png"; }
                 else if (location.interestCode == "I-003") { location.photo = "icon/marker_exp.png"; }
                 else if (location.interestCode == "I-004") { location.photo = "icon/marker_exercise.png"; }
                 else if (location.interestCode == "I-005") { location.photo = "icon/marker_show.png"; }
             }
             $("#choice_div2").html("<img src='"+ location.photo +"' class='img-circle' height='80px' width='80px'>" +
                 "<input type='hidden' name='lno2' value='"+ targetNo +"'>");
             $("#choice_name2").html("<span class='span_label'>"+ location.name +"</span>");
           }
         });
         c_count++;
       } else if ((c_count%4) == 3) {
         $.getJSON('ajax/locationDetail.do?no=' + targetNo, function(resultObj) {
           var ajaxResult = resultObj.ajaxResult;
           if (ajaxResult.status == "success") {
             var location = ajaxResult.data;
             if(!location.photo.length) { // 0일때
                 if (location.interestCode == "I-001") { location.photo = "icon/marker_food.png"; }
                 else if (location.interestCode == "I-002") { location.photo = "icon/marker_ent.png"; }
                 else if (location.interestCode == "I-003") { location.photo = "icon/marker_exp.png"; }
                 else if (location.interestCode == "I-004") { location.photo = "icon/marker_exercise.png"; }
                 else if (location.interestCode == "I-005") { location.photo = "icon/marker_show.png"; }
             }
             $("#choice_div3").html("<img src='"+ location.photo +"' class='img-circle' height='80px' width='80px'>" +
                 "<input type='hidden' name='lno3' value='"+ targetNo +"'>");
             $("#choice_name3").html("<span class='span_label'>"+ location.name +"</span>");
           }
         });
         c_count++;
       } else if ((c_count%4) == 0) {
         $.getJSON('ajax/locationDetail.do?no=' + targetNo, function(resultObj) {
           var ajaxResult = resultObj.ajaxResult;
           if (ajaxResult.status == "success") {
             var location = ajaxResult.data;
             if(!location.photo.length) { // 0일때
                 if (location.interestCode == "I-001") { location.photo = "icon/marker_food.png"; }
                 else if (location.interestCode == "I-002") { location.photo = "icon/marker_ent.png"; }
                 else if (location.interestCode == "I-003") { location.photo = "icon/marker_exp.png"; }
                 else if (location.interestCode == "I-004") { location.photo = "icon/marker_exercise.png"; }
                 else if (location.interestCode == "I-005") { location.photo = "icon/marker_show.png"; }
             }
             $("#choice_div4").html("<img src='"+ location.photo +"' class='img-circle' height='80px' width='80px'>" +
                 "<input type='hidden' name='lno4' value='"+ targetNo +"'>");
             $("#choice_name4").html("<span class='span_label'>"+ location.name +"</span>");
           }
         });
         c_count++;
       }
     }
     filterOne = targetNo;
   });
 });


 function closeOverlay() {
   mapInfoTestWindow[targetWindow].setVisible(false);
 }

 oMap.attach('mouseenter', function(oCustomEvent) {
   var oTarget = oCustomEvent.target;
   // 마커위에 마우스 올라간거면
   if (oTarget instanceof nhn.api.map.Marker) {
     var oMarker = oTarget;
     oLabel.setVisible(true, oMarker); // - 특정 마커를 지정하여 해당 마커의 title을 보여준다.
   }
 });

 oMap.attach('mouseleave', function(oCustomEvent) {
   var oTarget = oCustomEvent.target;
   // 마커위에서 마우스 나간거면
   if (oTarget instanceof nhn.api.map.Marker) {
     oLabel.setVisible(false);
   }
 }); 

 var daumurl = 'https://apis.daum.net/local/v1/search/keyword.json?apikey=';
 var apikey = '714e1b1cd11e15c987d142a03e1b65db';
 var startLoc = '37.514322572335935,127.06283102249932';
 var locOffset = new nhn.api.map.Size(0, 10);
 var oSize = new nhn.api.map.Size(20, 25);
 var locIcon = new nhn.api.map.Icon('locMarker.png', oSize, locOffset);
 var searchLocations = [];
 $("#st_loc_btn").click(function(event) {
   var query = $("#st_loc").val();
   $.ajax({
     url: daumurl + apikey + "&query="+query+"&location="+ startLoc +"&radius=20000",
     type: 'get',
     dataType: 'jsonp',
     success: function(data) {
       /* var locMarkers;
                               if (locMarkers instanceof nhn.api.map.Marker){
                                 oMap.removeOverlay(locMarkers);
                               } */
       searchLocations[0] = new nhn.api.map.LatLng(data.channel.item[0].latitude, data.channel.item[0].longitude);
       oMap.setCenter(searchLocations[0]);
       locMarkers = new nhn.api.map.Marker(locIcon, {title : '출발'});
       locMarkers.setPoint(oMap.getCenter());
       oMap.addOverlay(locMarkers);
     } 
   });
 });
 $("#ed_loc_btn").click(function(event) {
   var query = $("#ed_loc").val();
   $.ajax({
     url: daumurl + apikey + "&query="+query+"&location="+ startLoc +"&radius=20000",
     type: 'get',
     dataType: 'jsonp',
     success: function(data) {
       searchLocations[1] = new nhn.api.map.LatLng(data.channel.item[0].latitude, data.channel.item[0].longitude);
       locMarkers = new nhn.api.map.Marker(locIcon, {title : '도착'});
       locMarkers.setPoint(searchLocations[1]);
       oMap.addOverlay(locMarkers);
       oMap.setBound(searchLocations);

       /* 그렇게 지도에 띄우기 */
       var mapLat = oMap.getCenter().getLat();
       var mapLng = oMap.getCenter().getLng();
       if (!searchNo) {
        searchNo = "I-006";
       }
       for(var c = 0; c < openMarkers.length; c++){
         oMarkers[openMarkers[c]].setVisible(false);
         /* oMap.removeOverlay(oMarkers[openMarkers[c]]); // 열려있는 마커를 닫는다. */
       }
       $.getJSON('ajax/location.do?intCode=' + searchNo + '&lat=' + mapLat +'&lng=' + mapLng, function(resultObj) {
         var i = 0;
         for(var location of resultObj.data) {
           $("<li class='searchlists message' id='li"+location.lno+"'>")
             .html("<span class='from' style='white-space:nowrap;'>"+ location.name +
                 "</span><br><span style='font-size:11px;white-space:nowrap;'>"+ location.content +"</span></li>")
                 .appendTo(searchList); //리스트 띄우는 것.

           oMarkers[location.lno].setVisible(true);

           openMarkers[i] = location.lno;
           i++; // 닫기 위해 기존 있던 마커넘버를 저장하는 것.
         } // for문 끝 
         console.log("메뉴 이벤트 반복문 끝!");
         // 리스트를 위한 jQuery
         $(".list_example + div > p > span:last-child").text(Math.ceil($(".list_example").children("li").size()/5));
         $(".list_example > li").slice(0,5).addClass("on");
         $(".list_example > li:nth-of-type(5n)").addClass("5n");
         /* 리스트에 hover 일 때 해당하는 마커 딱 바뀌기 */
         $("li.searchlists").hover(function() {
           oMarkers[$(this).attr("id").substring(2)].setIcon(checkedIcon); 
         }, function() {
           oMarkers[$(this).attr("id").substring(2)].setIcon(oIcon); 
         });
         
         $("li.searchlists").click(function() {
           /* 정보창 띄우기 */
           if (targetWindow == 0) {
             mapInfoTestWindow[oMarkers[$(this).attr("id").substring(2)]._smallSrc].setVisible(true);
             oMap.setCenter(oMarkers[$(this).attr("id").substring(2)].getPoint());
             targetWindow = oMarkers[$(this).attr("id").substring(2)]._smallSrc;
        	   targetNo = oMarkers[$(this).attr("id").substring(2)]._smallSrc; // 정보창의 넘버
           } else if (targetWindow != 0) {
             mapInfoTestWindow[targetWindow].setVisible(false);
             mapInfoTestWindow[$(this).attr("id").substring(2)].setVisible(true);
             oMap.setCenter(oMarkers[$(this).attr("id").substring(2)].getPoint());
             targetWindow = oMarkers[$(this).attr("id").substring(2)]._smallSrc;
        	   targetNo = oMarkers[$(this).attr("id").substring(2)]._smallSrc; // 정보창의 넘버
           }
         });

       }); // AJAX 호출 끝
       $(".searchlists").remove();
       
     }  
   });
 });
</script>
<script type="text/javascript">
    try {document.execCommand('BackgroundImageCache', false, true);} catch(e) {}
</script>
   


   <!-- $.getJSON('ajax/locationDetail.do?no=' + $("#choice_div1").val(), function(resultObj) {
       var ajaxResult = resultObj.ajaxResult;
       if (ajaxResult.status == "success") {
         var location = ajaxResult.data;
         $("#choice_div1").html("<img src='images/portfolio/"+ location.photo +"' class='img-responsive' alt=''>")
       }
   }); -->
   
  <!--   인풋값 저장해서 DB에 넣기 TODO -->
  <script src="js/notifIt.js" type="text/javascript"></script>
   <script>
   var boardNo;
   var lnos = [];
   
   var photoMarker = [];
   var markerUrl = "";
   var fullUrl = 'http://openapi.naver.com/map/getStaticMap?version=1.0&crs=EPSG:4326&key=553205575474122b3423699dc799445d&uri=localhost:8080/sample_joahProject&w=390&h=250&maptype=default';
   var centerLoc = "";
   var photoLng;
   var photoLat;
   var iCount;
   $("#save_Btn").click(function(event) {
	 lnos[0] = parseInt($("input[name='lno1']").val());
   lnos[1] = parseInt($("input[name='lno2']").val());
   lnos[2] = parseInt($("input[name='lno3']").val());
   lnos[3] = parseInt($("input[name='lno4']").val());
   if (!lnos[0]) {
     not2();
	   return;
   }
     $.getJSON('ajax/locationDetail.do?no=' + lnos[0], function(resultObj) { // 포기 1개 좌표 가져와서
    	 var ajaxResult = resultObj.ajaxResult;
       if (ajaxResult.status == "success") {
           var locData = ajaxResult.data;
           photoMarker[0] = locData.lat + "," + locData.lng; 
           fullUrl += "&markers=" + photoMarker[0];
           centerLoc = "&center=" + photoMarker[0] + "&level=10";
           
           $.post('ajax/addboard.do', {
               id : sessionStorage.getItem('loginSession'),
               title : '후기를 등록하지 않은 글',
               content : '',
               likes : 0,
               dislikes : 0,
               heart : 'Y',
               icon : $('#img_icon').attr('src'),
               photo : fullUrl + centerLoc
             }, function(resultObj) {
                   boardNo = resultObj.data; // 데이터에서 넘버 받아와야 함.
                   $.post('ajax/addcourse.do', {
                       bno : boardNo,
                       lnoArray: JSON.stringify(lnos)
                     }, function(resultObj) {
                         not1();
                         location.href="index.html";
                     }, 'json'); 
               }, 'json');
        }
     });
   });
   
   </script>
 
 <script>

 function not1(){
     notif({
	msg: "<b>성공!</b> 게시물이 등록되었습니다!",
	type: "success",
	position: "center"
});
 }
 function not2(){
     notif({
	msg: "<b>잠깐 !</b> 1개 이상의 장소를 선택해주세요!",
	type: "error",
	position: "center"
});
 }
 function not3(){
     notif({
	type: "warning",
	msg: "<b>Warning:</b> Be patient my friend.",
	position: "left"
});
 }
 function not4(){
     notif({
	type: "info",
	msg: "<b>Info: </b>Some info here.",
	width: "all",
	height: 100,
	position: "center"
});
 }
 function not5(){
     notif({
	type: "error",
	msg: "<b>Error: </b>This error will stay here until you click it.",
	position: "center",
	width: 500,
	height: 60,
	autohide: false
});
 }
function not6(){
notif({
	type: "warning",
	msg: "Opacity is cool!",
	position: "center",
	opacity: 0.8
});
}

    </script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36251023-1']);
  _gaq.push(['_setDomainName', 'jqueryscript.net']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>