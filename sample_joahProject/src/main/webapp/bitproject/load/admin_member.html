<!DOCTYPE html>
<html lang='ko'>
<head>
  <title>회원관리</title>
  <link rel='stylesheet' href='css/admin_member.css' type='text/css'>
</head>
<body>
<div class='board_area'>
  <p class='board_tit'>
    <strong>회원수</strong>
    <em class='_memberCount'>1</em>
  </p>
  <div class='board_action' style='z-index:10'>
    <div class='action_in'> 선택 회원을&nbsp; 
	  <a class='btn_type _stopActivity' href='#'><span class='_stopActivity checkBtn'>활동 정지</span></a>
	  <a class='btn_type _forceWithdrawal' href='#'><span class='_forceWithdrawal deleteBtn'>강제 탈퇴</span></a>
	</div>	
  </div>
  <div id='_tableContent'>
	<table border='1' cellspacing='0' class='tbl_lst_type' id="listTable">	
	<caption>
	  <span class='blind'>회원 관리 정보</span>
	  </caption>				
	  <colgroup>
		  <col width='23'><col width='*'><col width='32'><col width='81'><col width='81'><col width='86'><col width='86'><col width='86'><col width='40'>
	  </colgroup>
	  <thead>
		  <tr>
			  <th scope='col' class='frst'><input name='c1' id='c1' title='선택' class='check _checkAll' type='checkbox'></th>
			  <th scope='col'><strong>아이디(이름,이메일)</strong></th>
			  <th scope='col'><strong class='line_r'><a href='#' class='btn_mem_view _detailViewAll'><span class='blind'>멤버 정보 상세보기</span></a></strong></th>
			  <th scope='col' class='last'><strong>커플유무</strong></th>
			  <th scope='col' class='last'><strong>관심사</strong></th>
			  <th scope='col' class='last'><strong>나이</strong></th>
			  <th scope='col' class='last'><strong>성별</strong></th>
		  </tr>
   	  </thead>
    </table>
  </div>
</div>
<script>
$.getJSON('ajax/member/list.do', function(resultObj) {
	var table = $('#listTable');
  for (var member of resultObj.data) {
    $("<tr class='_checkable  line_b' memberid='newotc'>")
      .html("<td class='tc'>"
  	 + "  <input type='checkbox' name='id[]' id='id' title='선택' class='check _checkMember' value='" + member.id +  "'>"
  	 + " </td>"
     + " <td>"
  	 + "   <div class='pers_nick_area'>"
  	 + "     <span class='img'>"
  	 + "     <img src='images/cafe_profile3_40x40.gif' width='15' height='20' alt=''>"
     + "     </span>"
  	 + "     <a href='#' class='nick _userInfo _click(NicknameUI|OpenUI|newotc) _stopDefault' memberid='newotc' align='center'>" 
  	 +		 member.id + "( " + member.name + " ," + member.email + ")</a>"
  	 + "  </div>"
     + " </td>"
     + " <td class='tc'>"
     + "    <a href='#' class='btn_mem_view _detailView'><span class='blind'>회원 정보 상세보기</span></a>"
     + "  </td>"
     + "  <td class='tc'>"
     + "     <span class='num' id='femail'>"+ member.cid +"</span>"
     + "  </td>"
     + "  <td class='tc'>"
     + "     <span class='num' id='femail'>"+ member.age +"</span>"
     + "  </td>"
     + "  <td class='tr'>"
     + "    <span class='num'>"+ member.age+"</span>"
     + "  </td>"
     + " <td class='tr'>"
     + "   <span class='num'>"+ member.gender+"</span>"
     + "  </td>"
     + "  </tr>").appendTo(table);
    } });
    
$('.checkBtn').click(
		function(event) {
			var ckId =  $("input[name='id[]']:checked");
			console.log(ckId.length);
			
			for (var i = 0; i < ckId.length; i++) {
				console.log(ckId[i].value);
			}
			
			var checkId = ckId[0].value;
			 console.log(checkId); 
		});
		
$('.deleteBtn').click(
		function(event) {
			var ckId =  $("input[name='id[]']:checked");
			console.log(ckId.length);
			
			for (var i = 0; i < ckId.length; i++) {
				console.log(ckId[i].value);
				$.getJSON('ajax/deleteAdmin.do?id=' + (ckId[i].value), function(resultObj) {
					var ajaxResult = resultObj.ajaxResult;
					if (ajaxResult.status == "success") {
						location.href = "adminpage.html";
					} else {
						alert("게시물 삭제에 실패했습니다.");
					}
				});
			}
		});
</script>
</body>
</html>