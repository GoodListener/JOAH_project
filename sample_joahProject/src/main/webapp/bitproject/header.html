<head>
</head>


<div class="logo">
	<a href="index.html">JOAH</a>
</div>
<div class="slogan">| Couple Date Course Website</div>

<div class="header_socials">
	<a href="#"><img src="../images/rss.png" alt="" title="" border="0" /></a> 
  <a href="#"><img src="../images/facebook.png" alt="" title="" border="0" /></a> 
	<a href="#"><img src="../images/linkedin.png" alt="" title="" border="0" /></a> 
	<a href="#"><img src="../images/twitter.png"	alt="" title="" border="0" /></a> 
	<a href="#"><img src="../images/flickr.png" alt="" title="" border="0" /></a>
</div>
<div class="menu">
	<div class="menu_bar">
		<ul>
			<li><a href="about.html">Map Search</a></li>
			<li><a href="index.html">My List</a></li>
			<li><a href="admin_rec.html">Admin Board</a></li>
			<li><a href="user_rec.html">User Board</a></li>
			<!-- <li><a href="#">Admin Menu</a>
        <ul>
            <li><a href="" title="">회원관리 </a></li>
            <li><a href="" title="">1:1 문의 </a></li>
            <li><a href="" title="">관리자 추천 게시판 </a></li>
        </ul>
        </li> -->
		</ul>
	</div>
	<div class="menu_login">
		<nav class="main-nav">
			<ul>
				<li><a style="display:none" class="cd-signin" id="before_login1">Sign in</a></li>
				<li><a style="display:none" class="cd-signup" id="before_login2">Sign up</a></li>
			</ul>
		</nav>
		<nav class="main-nav2">
			<ul>
			  	<li><div id="after_login2"></div></li>
				<li><a style="display:none" class="cd-signin" type="button" href="mypage.html" id="after_login3">My Page</a></li>
				<li><a style="display:none" class="cd-signout" type="button" id="after_login1" >Log out</a></li>
			</ul>
		</nav>
	</div>
</div>
<!------------------------------------------>
<!--            Modal 시작                -->
<!------------------------------------------>
   <div class="cd-user-modal">
      <!-- this is the entire modal form, including the background -->
      <div class="cd-user-modal-container">
         <!-- this is the container wrapper -->
         <ul class="cd-switcher">
            <li><a href="#0">Sign in</a></li>
            <li><a href="#0">New account</a></li>
         </ul>

         <div id="cd-login">
            <!-- log in form -->
            <form class="cd-form">
               <!--                <p class="fieldset">
                  <label class="image-replace cd-email" for="signin-email">E-mail</label>
                  <input class="full-width has-padding has-border" id="signin-email" type="email" placeholder="E-mail">
                  <span class="cd-error-message">Error message here!</span>
               </p> -->
               <p class="fieldset">
                  <label class="image-replace cd-email" for="signin-email">ID</label>
                  <input class="full-width has-padding has-border" id="signin-userID"
                     type="text" placeholder="ID"> 
                     <span class="cd-error-message">Error message here!</span>
               </p>

               <p class="fieldset">
                  <label class="image-replace cd-password" for="signin-password">Password</label>
                  <input class="full-width has-padding has-border"
                     id="signin-password" type="text" placeholder="Password">
                  <a href="#0" class="hide-password">Hide</a> <span
                     class="cd-error-message">Error message here!</span>
               </p>

               <p class="fieldset">
                  <input type="checkbox" id="saveId"> 
                  <label id="savelabel" for="saveId">ID Save</label>
               </p>

               <p class="fieldset">
                  <input class="full-width" type="submit" value="Login" id="loginBtn">
               </p>
            </form>

            <p class="cd-form-bottom-message">
               <a href="#0">Forgot your password?</a>
            </p>
            <a href="#0" class="cd-close-form">Close</a>
         </div>
         <!-- cd-login -->
<!-- ---------------------------------------------------------------------------------------------- -->
<!--                                             회원가입                                                                               -->
<!-- ---------------------------------------------------------------------------------------------- -->
         <div id="cd-signup">
            <!-- sign up form -->
            <form name='frm' class="cd-form">
               
               <p class="fieldset" oncancel="">
                  <label class="image-replace cd-userID" for="signup-userID">ID</label>
                  <input class="full-width has-padding has-border"
                      type="text" placeholder="ID" id="signup-userID">
                  <span class="cd-error-message" id="span-id-error">Error message here!</span>
                  <span class="id-confirm" id="id-confirm">좋다.</span>
               </p>

               <p class="fieldset">
                  <label class="image-replace cd-password" for="signup-password">Password</label>
                  <input class="full-width has-padding has-border"
                     id="signup-password" type="password" placeholder="Password">
                     <span class="cd-error-message" id="span-pwd-error">Error message here!</span>
               </p>

             <p class="fieldset">
                  <label class="image-replace cd-password" for="signup-check-password">Password Check</label> 
                  <input class="full-width has-padding has-border" id="signup-check-password" type="password" placeholder="Password Check">
                  <span class="cd-error-message" id="span-check-error">Error message here!</span>
               </p>

               <p class="fieldset">
                  <label class="image-replace cd-email" for="signup-email">E-mail</label>
                  <input class="full-width has-padding has-border" id="signup-email"
                     type="text" placeholder="E-mail"> 
                     <span class="cd-error-message" id="span-email-error">Error message here!</span>
               </p>

               <p class="fieldset">
                  <label class="image-replace cd-username" for="signup-username">Username</label>
                  <input class="full-width has-padding has-border"
                     id="signup-username" type="text" placeholder="Username">
                  <span class="cd-error-message" id="span-username-error">Error message here!</span>
               </p>

              
                 <table>
                 <tr>
                    <td>
                  <p class="fieldset">
                     <label class="image-replace cd-username" for="signup-username">Age</label>
                      <input style="width:170px" class="has-padding has-border" type="number" id="signup-age"placeholder="Age" min="0" max="100">
                      <span class="cd-error-message" id="span-age-error">Error message here!</span>
                  </p>
               </td>
               <td>
                  <p style="border-radius: 0.25em; padding: 11px 20px; width:230px; margin-top:-10px" 
                     class="has-border" >
               <span style="color: #bcbcbc; font-size: 15px;">Gender</span>
                  <input id="signup-gender-male" style="margin-left:25px" type="radio" name="radios" value="male">
                  <label style="margin-right: 10px; color:black;" for="radio1">Male</label>
                  <input type="radio" id="signup-gender-female" name="radios" value="female">
                  <span class="cd-error-message" id="span-gender-error">성별을 설정해주세요.</span>
                  <label style="color:black;"for="radio2">Female</label>
                  
                  </p>
               </td>
               </tr>
               </table>
               <table style="border: 1px solid #d2d8d8; border-radius: 0.25em; padding: 12px 20px 12px 50px;
                       margin: 22px 20px 16px 22px">
              <tr>
                <td style="color:#bcbcbc;vertical-align: middle;padding: 0px 15px;">
                   <img src="images/star1.svg" alt="" title="" border="0" /></td>
                <td style="color:#bcbcbc;vertical-align: middle;padding: 0px 15px;font-size:15px;">Interest</td>
                <td>
                 <input onclick="CountChecked(this)"  style="margin:15px 0 0 15px;" type="checkbox" value="walking" name="interest" id="walking">
                 <label for="walking">산책</label>
                 <input onclick="CountChecked(this)" style="margin:15px 0 0 15px;" type="checkbox" value="food" name="interest" id="food">
                 <label for="food">맛집</label>
                 <input onclick="CountChecked(this)" style="margin:15px 0 0 15px;" type="checkbox" value="culture" name="interest" id="culture">
                 <label style="padding-right:18px;" for="culture">문화/공연</label>
            
            <br>
            
                 <input onclick="CountChecked(this)" style="margin:15px 0 0 15px;" type="checkbox" value="exercise" name="interest" id="exercise">
                 <label for="exercise">운동</label>
                 <input onclick="CountChecked(this)" style="margin:15px 0 0 15px;" type="checkbox" value="play" name="interest" id="play">
                 <label for="play">유흥</label>
                 <input onclick="CountChecked(this)" style="margin:15px 0 0 15px;" type="checkbox" value="experience" name="interest" id="experience">
                 <label style="padding-right:18px;" for="experience">체험</label>
            
            <br>
            
            
                 <input onclick="CountChecked(this)" style="margin:15px 0 13px 15px;" type="checkbox" value="leisure" name="interest" id="leisure">
                 <label for="leisure">여가</label>
                 <input onclick="CountChecked(this)" style="margin:15px 0 15px 15px;" type="checkbox" value="etc" name="interest" id="etc">
                 <label for="etc">기타</label>
                 </td>
              </tr>
            </table>
            
             <!-- 프로필사진.  -->
            <div id="procImageView" style="width: 100px; height: 100px; margin:30px 0 0 23px; border: 1px solid silver;"></div>
            <div class="Uploadbtn">
              <input id="fileupload" class="input-upload" type="file" name="file" onchange="show(this)">
        	  <input id='fphotofile' type='hidden'>  
              <span>Upload</span>
            </div> 
            

               <p class="fieldset">
                  <input type="checkbox" id="accept-terms"> <label
                     for="accept-terms">I agree to the <a href="#0">Terms</a></label>
               </p>

               <p class="fieldset">
                  <input class="full-width has-padding" type="submit" id="addBtn"
                     value="Create account">
               </p>
            </form>

            <a href="" class="cd-close-form">Close</a>
         </div>
         <!-- cd-signup -->

         <div id="cd-reset-password">
            <!-- reset password form -->
            <p class="cd-form-message">Lost your password? Please enter your
               email address. You will receive a link to create a new password.</p>

            <form class="cd-form">
               <p class="fieldset">
                  <label class="image-replace cd-email" for="reset-email">E-mail</label>
                  <input class="full-width has-padding has-border" id="reset-email"
                     type="email" placeholder="E-mail"> <span
                     class="cd-error-message">Error message here!</span>
               </p>

               <p class="fieldset">
                  <input class="full-width has-padding" type="submit"
                     value="Reset password">
               </p>
            </form>

            <p class="cd-form-bottom-message">
               <a href="#0">Back to log-in</a>
            </p>
         </div>
         <!-- cd-reset-password -->
         <a href="#0" class="cd-close-form">Close</a>
      </div>
      <!-- cd-user-modal-container -->
   </div>
   <!-- cd-user-modal -->
   <!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>-->
   
   
   <!-- start 민수 회원가입 -->
   <!-- <script type="text/javascript" src="../lib/jquery/jquery.js"></script> -->
   <!-- cd-user-modal -->
   <script type="text/javascript" src="js/jquery.cookie.js"></script>
   <script type="text/javascript" src="js/jquery.session.js"></script>
   <script type="text/javascript" src="../lib/myjs/main.js"></script>
   <script type="text/javascript" src="js/jquery.ui.widget.js"></script>
   <script type="text/javascript" src="js/jquery.fileupload.js"></script>
   <script>
    $(document).ready( function() {
    var id = $.cookie("id");
    if (id != null && id != "") {
    	$("#signin-userID").val(); // id textbox에 쿠키값 출력
      $("#saveId").attr("checked", "checked"); // 체크박스에 체크
    }
  });  
    $('#loginBtn').click( function(event) {
          var checkStatus = $("#saveId").is(":checked");
          if (checkStatus) {
            $.cookie("id", $("#signin-userID").val());
          } else {
            $.cookie("id", "");
          }   
           
          $.post('ajax/login.do', {
            id : $('#signin-userID').val(),
            password : $('#signin-password').val(),
          }, function(resultObj) {
            var ajaxResult = resultObj.ajaxResult;
            if (ajaxResult.status == "success") {
              idSession = ajaxResult.data.id;
              sessionStorage.setItem('loginSession',idSession);
              location.href = "";
            } else {
              alert("없는 아이디 이거나 패스워드가 일치하지 않습니다.");
            }
          }, 'json');
        });
  
    $('#after_login1').click( function(event) {
         $.post('ajax/logout.do',
         function(resultObj) {
          var ajaxResult = resultObj.ajaxResult;
          if (ajaxResult.status == "success") {
            sessionStorage.removeItem('loginSession');
            location.href = "";
          }
        },'json');
      });
  
   if(sessionStorage.getItem('loginSession') != undefined) {
     $("#after_login1").show();
     $("#after_login2").show();
     $("#after_login4").show();
     $("#after_login2").text(sessionStorage.getItem('loginSession') + "님");
     $("#after_login3").show();
     $("#com-content").show();
  } else {
    $("#before_login1").show();
    $("#before_login2").show();
     $("#com-content2").show();
  }
   
   // 프로필 사진.
   $('#fileupload').fileupload({
       url: 'ajax/upload.do',
       dataType: 'json',
       maxFileSize: 10000000,
       disableImageResize: /Android(?!.*Chrome)|Opera/
         .test(window.navigator.userAgent),
     }).on('fileuploadsubmit', function(e, data) {
       // 서버에 일반 폼 데이터도 보내고 싶으면, submit 하기 전에
       // 다음과 같이 formData 프로퍼티에 값을 설정하라!
       /*
       data.formData = {
         data1: 'okok',
         data2: 'nono'
       };
       */
     }).on('fileuploaddone', function(e, data) {
       console.log(data.result);
       $('#files').html('');
       $.each(data.result.data,function (index, file) {
           $('<span/>')
           .text(file.name 
               + '(' + file.originName + ')'
               + ', ' + file.size)
               .appendTo('#files');
           $('#fphotofile').val(file.name);
       })
       });
    
   /* 회원가입 */
   ////////////////
   var uID = $("#signup-userID");
   var uPWD = $("#signup-password");
   var uPWDcheck = $("#signup-check-password");
   var uEmail = $("#signup-email");
   var uName = $("#signup-username");
   var uAge = $("#signup-age");
   var uGender = $("input[name='radios']:checked");
   var isExistID = false;
   /* 아이디 중복 체크 */
   
   
   $("#signup-userID").blur(function(event) {
     $.getJSON('ajax/idcheck.do', function(resultObj){
         for (var member of resultObj.data) {
           if(uID.val() == member.id){
             isExistID = true;
           }
         }
     if( uID.val() == "" ){
    	 $("#span-id-error").attr("class","cd-error-message is-visible");
       $("#span-id-error").text("아이디를 입력해주세요.");
       $("#signup-userID").addClass("has-error");
       $("#id-confirm").addClass("notvisible");
       return false;
     } else if (isExistID) {
    	 $("#span-id-error").attr("class","cd-error-message is-visible");
    	 $("#span-id-error").text("이미 존재하는 아이디 입니다.");
       $("#signup-userID").addClass("has-error");
       $("#id-confirm").addClass("notvisible");
       isExistID = false;
       return false;
     } else {
    	 $("#span-id-error").attr("class","cd-success-message");
    	 $("#span-id-error").addClass("is-visible");
       $("#signup-userID").addClass("has-success");
       $("#id-confirm").attr("class", "id-confirm visible");
       $("#id-confirm").text("좋은 아이디네요.");
     }
     });
   });
   
   $("input[name='radios']").click(function(event) {
     uGender = $("input[name='radios']:checked");
     uGender.addClass("has-success");
   }); /* 성별을 체크했을 때에 uGender 값 바꾸기. */
   
   
   $("#signup-password").blur(function(event) {
       if (uPWD.val() == "") {
         $("#span-pwd-error").attr("class","cd-error-message");
         $("#span-pwd-error").addClass("is-visible");
         $("#signup-password").addClass("has-error");
         $("#span-pwd-error").text("비밀번호를 입력해주세요.");
       } else {
    	   $("#span-pwd-error").attr("class","cd-success-message");
    	   $("#span-pwd-error").addClass("is-visible");
    	   $("#signup-password").addClass("has-success");
         $("#span-pwd-error").text("");
       }
   });
   
   $('#signup-check-password').blur(function(event) {
       if (uPWD.val() != uPWDcheck.val()) {
    	   $("#span-check-error").attr("class","cd-error-message");
         $("#span-check-error").addClass("is-visible");
         $("#signup-check-password").addClass("has-error");
         $("#span-check-error").text("비밀번호가 일치하지 않습니다.");
       } else {
    	   $("#span-check-error").attr("class","cd-success-message");
         $("#span-check-error").addClass("is-visible");
         $("#signup-check-password").addClass("has-success");
         $("#span-check-error").text("비밀번호가 일치합니다.");
       }
   });
   
   var isEmail = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/;
   uEmail.blur(function(event) {
	   if(uEmail.val() == "") {
		   $("#span-email-error").attr("class","cd-error-message");
	     $("#span-email-error").addClass("is-visible");
	     uEmail.addClass("has-error");
	     $("#span-email-error").text("이메일을 입력해주세요.");
	   } else if (!isEmail.test(uEmail.val())) {
		   $("#span-email-error").attr("class","cd-error-message");
	     $("#span-email-error").addClass("is-visible");
	     uEmail.addClass("has-error");
	     $("#span-email-error").text("이메일 형식에 맞지 않습니다. ex) test@google.com");
	   } else {
		   $("#span-email-error").attr("class","cd-success-message");
	     $("#span-email-error").addClass("is-visible");
	     uEmail.addClass("has-success");
	     $("#span-email-error").text("사용할 수 있는 이메일 입니다.");
	   }
   });
   
   var isName = /^[가-힝]{2,}$/; //영어도 되도록 하기.
   uName.blur(function(event) {
	   if(uName.val() == "") {
		   $("#span-username-error").attr("class","cd-error-message");
	     $("#span-username-error").addClass("is-visible");
	     uName.addClass("has-error");
	     $("#span-username-error").text("이름을 입력해주세요.");
     } else if (!isName.test(uName.val())) {
    	 $("#span-username-error").attr("class","cd-error-message");
       $("#span-username-error").addClass("is-visible");
       uName.addClass("has-error");
       $("#span-username-error").text("이름은 한글, 영어(대,소문자)로 입력해주세요.");
     } else {
    	 $("#span-username-error").attr("class","cd-success-message");
       $("#span-username-error").addClass("is-visible");
       uName.addClass("has-success");
       $("#span-username-error").text("잘했어요.");
     }
   });
   
   uAge.blur(function(event) {
     if (uAge.val() == "") {
    	 $("#span-age-error").attr("class","cd-error-message");
         $("#span-age-error").addClass("is-visible");
         uAge.addClass("has-error");
         $("#span-age-error").text("나이를 입력해주세요.");
     } else {
    	 $("#span-age-error").attr("class","cd-success-message");
         $("#span-age-error").addClass("is-visible");
         uAge.addClass("has-success");
         $("#span-age-error").text("잘했어요.");
     }
   });
   
   $("#addBtn").click(function(event) {
	   console.log(uGender.hasClass("has-success"));
    if(!uID.hasClass("has-success")) {
    	uID.focus();
    	return;
    }
    if(!uPWD.hasClass("has-success")) {
    	uPWD.focus();
        return;
      }
    if(!uPWDcheck.hasClass("has-success")) {
    	uPWDcheck.focus();
        return;
      }
    if(!uEmail.hasClass("has-success")) {
    	uEmail.focus();
    }
    if(!uName.hasClass("has-success")) {
    	uName.focus();
        return;
      }
    if(!uAge.hasClass("has-success")) {
    	uAge.focus();
    	return;
    }
    if(!uGender.hasClass("has-success")) {
    	$("#span-gender-error").attr("class","cd-error-message");
      $("#span-gender-error").addClass("is-visible");
      uGender.focus();
    	return;
    }
    
   $.post('ajax/addmember.do', {
      id: $('#signup-userID').val(),
      password: $('#signup-password').val(),
      email: $('#signup-email').val() ,
      name: $('#signup-username').val() ,
      age: $('#signup-age').val() ,
      gender: uGender.val(),
      photo: $('#fphotofile').val()
    }, function(resultObj) {
      var ajaxResult = resultObj.ajaxResult;
      if (ajaxResult.status == "success") {
               location.href = "index.html";
             } else {
             alert("게시물 등록에 실패했습니다.");
           } 
    }, 'json'); 
   });
   
   </script>
   <script> 
  var maxChecked = 3;   //선택가능한 체크박스 갯수
  var totalChecked = 0; // 설정 끝
  function CountChecked(field) {
      if (field.checked)
          totalChecked += 1;
      else
          totalChecked -= 1;
      if (totalChecked > maxChecked) {
          alert ("최대 3개 까지만 가능합니다.");
      field.checked = false;
      totalChecked -= 1;
      }
      
  }
  function ResetCount(){
      totalChecked = 0;
  }

</script>
   <!-- end 응철 회원가입 -->
   <!------------------------------------------>
   <!--            Modal 끝                  -->
   <!------------------------------------------>

